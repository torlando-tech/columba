---
milestone: v0.8.0
audited: 2026-02-05
status: gaps_found
scores:
  requirements: 7/14
  phases: 4/5
  integration: 0/1
  flows: 0/1
gaps:
  requirements:
    - id: NET-01
      description: "Packetizer sends encoded frames to Python Reticulum"
      reason: "Kotlin Packetizer created but never started (STATUS_ESTABLISHED never received)"
      priority: must
    - id: NET-02
      description: "LinkSource receives encoded frames from Python Reticulum"
      reason: "Kotlin LinkSource created but never started (STATUS_ESTABLISHED never received)"
      priority: must
    - id: NET-03
      description: "SignallingReceiver handles inband call signalling"
      reason: "Signal type mismatch: Python sends STRING, Kotlin expects INTEGER"
      priority: must
    - id: BRIDGE-01
      description: "Pythonâ†”Kotlin bridge passes only encoded packets"
      reason: "Python LXST still handles all audio, Kotlin never activated"
      priority: must
    - id: TEL-02
      description: "Outgoing calls connect with dial tone feedback"
      reason: "Dial tone plays but call never reaches ESTABLISHED"
      priority: must
    - id: TEL-04
      description: "Profile switching works mid-call"
      reason: "Cannot test - calls never reach ESTABLISHED state"
      priority: must
    - id: QUAL-01
      description: "Voice calls on LAN have no audible pops/delays"
      reason: "Dual audio pipeline causes buffer underruns"
      priority: must
  integration:
    - from: "Python call_manager"
      to: "Kotlin Telephone"
      connection: "INTEGER signal forwarding"
      reason: "Python _notify_kotlin sends STRING events, Kotlin expects INTEGER"
      priority: must
  flows:
    - name: "Outgoing call establishes"
      broken_at: "Signal receipt"
      reason: "Kotlin Telephone never receives STATUS_CONNECTING/ESTABLISHED signals"
      priority: must
tech_debt:
  - phase: 11-telephony-integration
    items:
      - "No instrumented tests for Telephone"
      - "Profile.createCodec() requires JNI - unit tests catch UnsatisfiedLinkError"
      - "Python LXST disable path not implemented"
---

# v0.8.0 Milestone Audit Report

## Summary

Phase 11 (Telephony Integration) executed all 5 plans but verification revealed critical gaps. The Kotlin LXST components were built correctly but the **signal bridge** between Python and Kotlin has a type mismatch that prevents Kotlin audio pipelines from ever activating.

## Root Cause

**Signal Type Mismatch:**
- Python `call_manager.py` calls `_notify_kotlin('established', ...)` with STRING event type
- Kotlin `Telephone.kt` expects INTEGER signals via `onSignalReceived(signal: Int)`
- Result: Kotlin Telephone never transitions to ESTABLISHED, audio flows through Python LXST

## Phase Status

| Phase | Plans | Code Built | Verification | Status |
|-------|-------|------------|--------------|--------|
| 7 - Codec Foundation | 6/6 | âœ… | âœ… | Complete |
| 8 - Sources & Sinks | 4/4 | âœ… | âœ… | Complete |
| 9 - Mixer & Pipeline | 4/4 | âœ… | âœ… | Complete |
| 10 - Network Bridge | 5/5 | âœ… | âœ… | Complete |
| 11 - Telephony Integration | 5/5 | âœ… | âŒ | **Gaps Found** |

## Critical Gaps

### Gap 1: Signal Type Mismatch (NET-03, Integration)

**Current:**
```python
# Python call_manager.py line 503
self._notify_kotlin('established', identity_hash)  # STRING
```

**Expected:**
```kotlin
// Kotlin Telephone.kt line 152
networkTransport.setSignalCallback { signal: Int -> onSignalReceived(signal) }
```

**Fix:** Forward INTEGER signals from Python to Kotlin via NetworkPacketBridge

### Gap 2: Dual Audio Pipeline (BRIDGE-01, QUAL-01)

**Problem:** Both Python LXST and Kotlin LXST compete for AudioTrack

**Evidence:**
```
AudioFlinger: BUFFER TIMEOUT: remove track... due to underrun
ðŸ“¡ PKT.tx#201  (Python LXST sending packets)
```

**Fix:** Disable Python LXST audio when Kotlin LXST is active

### Gap 3: Kotlin Pipelines Never Start (NET-01, NET-02, TEL-02)

**Problem:** `openPipelines()` and `startPipelines()` never called for outgoing calls

**Cause:** STATUS_CONNECTING signal never received (Gap 1)

**Fix:** Once Gap 1 fixed, this should work automatically

## Tech Debt

- No instrumented tests for Telephone (JNI required)
- Profile.createCodec() unit tests catch UnsatisfiedLinkError
- Python LXST disable path not implemented

## Recommended Fix Phases

### Phase 11.5: Signal Bridge Fix

**Goal:** Wire INTEGER signals from Python to Kotlin Telephone
**Tasks:**
1. Add `receiveSignal(int)` method to NetworkPacketBridge
2. Call `receiveSignal()` from Python when LXST signals arrive
3. Verify Kotlin logs show `Signal received: 0x06`

### Phase 11.6: Python LXST Audio Disable

**Goal:** Disable Python audio pipelines when Kotlin LXST active
**Tasks:**
1. Add `set_kotlin_audio_active(bool)` to Python LXST
2. Call from Kotlin when opening pipelines
3. Verify no Python audio logs during call
